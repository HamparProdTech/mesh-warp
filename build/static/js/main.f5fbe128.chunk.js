(this["webpackJsonpmesh-warp-app"]=this["webpackJsonpmesh-warp-app"]||[]).push([[0],Array(20).concat([function(t){t.exports=JSON.parse('{"width":294,"height":971,"columns":5,"rows":6,"positions":[{"x":75.66666412353516,"y":75},{"x":155,"y":14},{"x":249.66666412353516,"y":-8},{"x":317.4,"y":-6},{"x":404,"y":18},{"x":471,"y":76},{"x":145,"y":263},{"x":184,"y":232},{"x":238,"y":227},{"x":305,"y":224},{"x":373,"y":225},{"x":408,"y":227},{"x":183,"y":434},{"x":210,"y":417},{"x":250,"y":412},{"x":299,"y":412},{"x":354,"y":405},{"x":385,"y":405},{"x":196,"y":602},{"x":219,"y":581},{"x":255,"y":564},{"x":297,"y":563},{"x":339,"y":563},{"x":387,"y":581},{"x":177,"y":770},{"x":205,"y":716},{"x":244,"y":684},{"x":298,"y":675},{"x":357,"y":698},{"x":410,"y":743},{"x":162,"y":862},{"x":202,"y":830},{"x":251,"y":799},{"x":303,"y":782},{"x":356,"y":800},{"x":430,"y":870},{"x":109,"y":960},{"x":187,"y":908},{"x":242,"y":899},{"x":318,"y":893},{"x":380,"y":898},{"x":446,"y":926}],"rootPositions":[{"x":0,"y":0},{"x":58.8,"y":0},{"x":117.6,"y":0},{"x":176.39999999999998,"y":0},{"x":235.2,"y":0},{"x":294,"y":0},{"x":0,"y":161.83333333333334},{"x":58.8,"y":161.83333333333334},{"x":117.6,"y":161.83333333333334},{"x":176.39999999999998,"y":161.83333333333334},{"x":235.2,"y":161.83333333333334},{"x":294,"y":161.83333333333334},{"x":0,"y":323.6666666666667},{"x":58.8,"y":323.6666666666667},{"x":117.6,"y":323.6666666666667},{"x":176.39999999999998,"y":323.6666666666667},{"x":235.2,"y":323.6666666666667},{"x":294,"y":323.6666666666667},{"x":0,"y":485.5},{"x":58.8,"y":485.5},{"x":117.6,"y":485.5},{"x":176.39999999999998,"y":485.5},{"x":235.2,"y":485.5},{"x":294,"y":485.5},{"x":0,"y":647.3333333333334},{"x":58.8,"y":647.3333333333334},{"x":117.6,"y":647.3333333333334},{"x":176.39999999999998,"y":647.3333333333334},{"x":235.2,"y":647.3333333333334},{"x":294,"y":647.3333333333334},{"x":0,"y":809.1666666666667},{"x":58.8,"y":809.1666666666667},{"x":117.6,"y":809.1666666666667},{"x":176.39999999999998,"y":809.1666666666667},{"x":235.2,"y":809.1666666666667},{"x":294,"y":809.1666666666667},{"x":0,"y":971},{"x":58.8,"y":971},{"x":117.6,"y":971},{"x":176.39999999999998,"y":971},{"x":235.2,"y":971},{"x":294,"y":971}]}')},function(t){t.exports=JSON.parse('{"width":297,"height":974,"columns":5,"rows":6,"positions":[{"x":4.5,"y":46},{"x":70.5,"y":11},{"x":118.8,"y":2},{"x":206.5,"y":-1},{"x":249.5,"y":17},{"x":275.5,"y":59},{"x":22.5,"y":199},{"x":107.5,"y":179},{"x":178.5,"y":171},{"x":223.5,"y":182},{"x":249.5,"y":190},{"x":251.5,"y":225},{"x":27.5,"y":335},{"x":108.5,"y":327},{"x":162.5,"y":327},{"x":205.5,"y":347},{"x":224.5,"y":358},{"x":236.5,"y":387},{"x":18.5,"y":486},{"x":72.5,"y":475},{"x":134.5,"y":473},{"x":176.5,"y":477},{"x":203.5,"y":509},{"x":230.5,"y":558},{"x":8.5,"y":642},{"x":91.5,"y":621},{"x":152.5,"y":610},{"x":184.5,"y":623},{"x":216.5,"y":646},{"x":240.5,"y":709},{"x":6.5,"y":789},{"x":90.5,"y":769},{"x":144.5,"y":756},{"x":178.5,"y":762},{"x":211.5,"y":778},{"x":239.5,"y":796},{"x":0.5,"y":942},{"x":56.5,"y":919},{"x":122.5,"y":905},{"x":173.5,"y":903},{"x":205.5,"y":907},{"x":230.5,"y":919}],"rootPositions":[{"x":0,"y":0},{"x":59.4,"y":0},{"x":118.8,"y":0},{"x":178.2,"y":0},{"x":237.6,"y":0},{"x":297,"y":0},{"x":0,"y":162.33333333333334},{"x":59.4,"y":162.33333333333334},{"x":118.8,"y":162.33333333333334},{"x":178.2,"y":162.33333333333334},{"x":237.6,"y":162.33333333333334},{"x":297,"y":162.33333333333334},{"x":0,"y":324.6666666666667},{"x":59.4,"y":324.6666666666667},{"x":118.8,"y":324.6666666666667},{"x":178.2,"y":324.6666666666667},{"x":237.6,"y":324.6666666666667},{"x":297,"y":324.6666666666667},{"x":0,"y":487},{"x":59.4,"y":487},{"x":118.8,"y":487},{"x":178.2,"y":487},{"x":237.6,"y":487},{"x":297,"y":487},{"x":0,"y":649.3333333333334},{"x":59.4,"y":649.3333333333334},{"x":118.8,"y":649.3333333333334},{"x":178.2,"y":649.3333333333334},{"x":237.6,"y":649.3333333333334},{"x":297,"y":649.3333333333334},{"x":0,"y":811.6666666666667},{"x":59.4,"y":811.6666666666667},{"x":118.8,"y":811.6666666666667},{"x":178.2,"y":811.6666666666667},{"x":237.6,"y":811.6666666666667},{"x":297,"y":811.6666666666667},{"x":0,"y":974},{"x":59.4,"y":974},{"x":118.8,"y":974},{"x":178.2,"y":974},{"x":237.6,"y":974},{"x":297,"y":974}]}')},function(t){t.exports=JSON.parse('{"width":287,"height":940,"columns":5,"rows":6,"positions":[{"x":434,"y":-4},{"x":524,"y":8},{"x":584,"y":-4},{"x":642,"y":-2},{"x":707,"y":7},{"x":795,"y":19},{"x":450,"y":210},{"x":518,"y":202},{"x":562,"y":204},{"x":623,"y":208},{"x":698,"y":209},{"x":741,"y":254},{"x":447,"y":429},{"x":527,"y":394},{"x":575,"y":393},{"x":639,"y":389},{"x":677,"y":385},{"x":716,"y":427},{"x":472,"y":612},{"x":543,"y":583},{"x":598,"y":568},{"x":661,"y":551},{"x":705,"y":540},{"x":759,"y":575},{"x":521,"y":752},{"x":579,"y":740},{"x":654,"y":704},{"x":716,"y":700},{"x":772,"y":675},{"x":831,"y":702},{"x":577,"y":890},{"x":628,"y":862},{"x":697,"y":834},{"x":774,"y":830},{"x":838,"y":830},{"x":883,"y":798},{"x":645,"y":942},{"x":750,"y":950},{"x":810,"y":916},{"x":882,"y":888},{"x":977,"y":912},{"x":1036,"y":902}],"rootPositions":[{"x":0,"y":0},{"x":57.4,"y":0},{"x":114.8,"y":0},{"x":172.2,"y":0},{"x":229.6,"y":0},{"x":287,"y":0},{"x":0,"y":156.66666666666666},{"x":57.4,"y":156.66666666666666},{"x":114.8,"y":156.66666666666666},{"x":172.2,"y":156.66666666666666},{"x":229.6,"y":156.66666666666666},{"x":287,"y":156.66666666666666},{"x":0,"y":313.3333333333333},{"x":57.4,"y":313.3333333333333},{"x":114.8,"y":313.3333333333333},{"x":172.2,"y":313.3333333333333},{"x":229.6,"y":313.3333333333333},{"x":287,"y":313.3333333333333},{"x":0,"y":470},{"x":57.4,"y":470},{"x":114.8,"y":470},{"x":172.2,"y":470},{"x":229.6,"y":470},{"x":287,"y":470},{"x":0,"y":626.6666666666666},{"x":57.4,"y":626.6666666666666},{"x":114.8,"y":626.6666666666666},{"x":172.2,"y":626.6666666666666},{"x":229.6,"y":626.6666666666666},{"x":287,"y":626.6666666666666},{"x":0,"y":783.3333333333333},{"x":57.4,"y":783.3333333333333},{"x":114.8,"y":783.3333333333333},{"x":172.2,"y":783.3333333333333},{"x":229.6,"y":783.3333333333333},{"x":287,"y":783.3333333333333},{"x":0,"y":940},{"x":57.4,"y":940},{"x":114.8,"y":940},{"x":172.2,"y":940},{"x":229.6,"y":940},{"x":287,"y":940}]}')},,,,,,,function(t,e,s){},,,function(t,e,s){},function(t,e,s){"use strict";s.r(e),e.default=s.p+"static/media/guide_right_01.15c1b8df.jpg"},function(t,e,s){"use strict";s.r(e),e.default=s.p+"static/media/guide_left_01.7e7d44cd.jpg"},function(t,e,s){"use strict";s.r(e),e.default=s.p+"static/media/guide_left_02.09825351.jpg"},function(t,e,s){},function(t,e,s){},function(t,e,s){"use strict";s.r(e),e.default=s.p+"static/media/asset_01.dae64ad5.jpg"},function(t,e,s){"use strict";s.r(e),e.default=s.p+"static/media/asset_02.a1965573.jpg"},function(t,e,s){"use strict";s.r(e),e.default=s.p+"static/media/asset_03.885eb998.jpg"},function(t,e,s){"use strict";s.r(e),e.default=s.p+"static/media/asset_04.7b80fa12.jpg"},function(t,e,s){"use strict";s.r(e),e.default=s.p+"static/media/asset_looney2.11c89469.jpg"},function(t,e,s){"use strict";s.r(e),e.default=s.p+"static/media/asset_bp2.0245ee45.jpg"},function(t,e,s){"use strict";s.r(e),e.default=s.p+"static/media/asset_tmnt2.c93b4bf5.jpg"},function(t,e,s){"use strict";s.r(e),e.default=s.p+"static/media/layer_01.0eaae9e9.png"},function(t,e,s){"use strict";s.r(e),e.default=s.p+"static/media/layer_02_multiply.f88cdf8f.png"},function(t,e,s){"use strict";s.r(e),e.default=s.p+"static/media/layer_03_base.caa520d5.png"},function(t,e,s){"use strict";s.r(e),e.default=s.p+"static/media/sock_mask_left.69764d68.png"},function(t,e,s){"use strict";s.r(e),e.default=s.p+"static/media/sock_mask_right.7a9dd145.png"},,,,,,,,,function(t,e,s){"use strict";s.r(e);var i=s(1),a=s(0),n=s.n(a),c=s(13),r=s.n(c),o=(s(29),s(3)),u=s(60),h=s(6),x=Object(h.a)(),y=(s(19),s(24)),l=s(7),d=s(8),f=function(){function t(){Object(l.a)(this,t)}return Object(d.a)(t,[{key:"init",value:function(t){var e=t.width,s=t.height,i=t.rows,a=t.columns,n=t.positions,c=t.rootPositions;if(!this.build){this.build=!0,this.width=e,this.height=s,this.rows=i,this.columns=a;var r=e/a,o=s/i,u=++i*++a;if(this.positions=n||[],this.rootPositions=c||[],!this.positions.length)for(var h=0;h<u;h++){var x={x:h%a*r,y:Math.floor(h/a)*o};this.positions.push(x),this.rootPositions.push(Object(y.a)({},x))}this.grids=[];for(var l=0;l<this.positions.length-a;l++)this.grids.push({t1:[0,1,a],t2:[1,a,1+a]})}}},{key:"updateDot",value:function(t,e,s){this.positions[t]={x:e,y:s}}}]),t}(),m=s(16),g=function(){function t(){Object(l.a)(this,t)}return Object(d.a)(t,[{key:"init",value:function(t,e,s,i){this.output=document.createElement("canvas"),this.output.id="output",this.wireframe=document.createElement("canvas"),this.wireframe.id="wireframe",this.output.width=t,this.output.height=e,this.wireframe.width=t,this.wireframe.height=e,this.src=s,this.gridManager=i,this.update()}},{key:"updateMeshLines",value:function(){var t=this.wireframe.getContext("2d");t.clearRect(0,0,this.wireframe.width,this.wireframe.height),t.strokeStyle="lime",t.lineWidth=2;for(var e=0;e<this.gridManager.positions.length;e++){var s=this.gridManager.positions[e],i=this.gridManager.positions[e+1];if(e&&(e+1)%(this.gridManager.columns+1)===0&&(i=null),t.beginPath(),e>=this.gridManager.columns+1){var a=this.gridManager.positions[e-this.gridManager.columns-1];t.moveTo(a.x,a.y),t.lineTo(s.x,s.y)}else t.moveTo(s.x,s.y);i&&t.lineTo(i.x,i.y),t.stroke(),t.closePath()}}},{key:"linearSolution",value:function(t,e,s,i,a,n,c,r,o){t=parseFloat(t),e=parseFloat(e),s=parseFloat(s),i=parseFloat(i),a=parseFloat(a),n=parseFloat(n),c=parseFloat(c),r=parseFloat(r);var u=((n-(o=parseFloat(o)))*(e-a)-(s-n)*(a-r))/((i-c)*(e-a)-(t-i)*(a-r)),h=((n-o)*(t-i)-(s-n)*(i-c))/((a-r)*(t-i)-(e-a)*(i-c));return[u,h,s-t*u-e*h]}},{key:"meshify",value:function(){var t=this.src,e=this.gridManager,s=e.columns,i=e.rows,a=this.output.getContext("2d"),n=this.output.width,c=this.output.height,r=t.width/s,o=t.height/i,u=e.rootPositions[0],h=u.x,x=u.y,y=h+r,l=x+o;a.clearRect(0,0,n,c);for(var d=e.positions.length-s-1-1;d>-1;d--)if((d+1)%(s+1)!==0){var f=e.positions[d],m=e.positions[d+1],g=e.positions[d+1+s],p=e.positions[d+2+s],b=e.rootPositions[d],v=b.x,j=b.y,O=f.x,w=f.y,_=m.x,C=m.y,k=g.x,E=g.y,N=p.x,M=p.y,S=this.linearSolution(y,l,N,y,h,_,h,l,k),T=this.linearSolution(y,l,M,y,x,C,x,l,E);a.save(),a.setTransform(S[0],T[0],S[1],T[1],S[2],T[2]),a.beginPath(),a.moveTo(y,l),a.lineTo(y,x),a.lineTo(h,l),a.lineTo(y,l),a.closePath(),a.fillStyle="transparent",a.fill(),a.clip(),a.drawImage(t,v,j,r,o,0,0,r,o),a.restore();var R=this.linearSolution(h,h,O,y,h,_,h,l,k),I=this.linearSolution(x,x,w,y,x,C,x,l,E);a.save(),a.setTransform(R[0],I[0],R[1],I[1],R[2],I[2]),a.beginPath(),a.moveTo(h,x),a.lineTo(y,x),a.lineTo(h,l),a.lineTo(h,x),a.closePath(),a.fillStyle="transparent",a.fill(),a.clip(),a.drawImage(t,v,j,r,o,0,0,r,o),a.restore()}}},{key:"update",value:function(){this.meshify(),this.updateMeshLines()}}]),t}(),p=function(){function t(){Object(l.a)(this,t)}return Object(d.a)(t,[{key:"init",value:function(t){var e=t.width,s=t.height,i=t.image,a=t.id,n=t.data,c=t.mesh,r=i.src,o=i.x,u=i.y,h=i.width,x=i.height;if(this.id=a,this.values=[r,o||0,u||0,h||r.width,x||r.height],this.parent=r,c)this.initMesh(e,s,n);else{this.canvas=document.createElement("canvas"),this.canvas.id="dummy_canvas_".concat(a),this.canvas.width=e,this.canvas.height=s;var y=this.canvas.getContext("2d");y.drawImage.apply(y,Object(m.a)(this.values))}}},{key:"initMesh",value:function(t,e,s){var i=new f;s=s||{width:this.parent.width,height:this.parent.height,columns:5,rows:6},i.init(s),this.meshCanvas=new g,this.meshCanvas.init(t,e,this.parent,i)}},{key:"updateDot",value:function(t,e,s){this.meshCanvas.gridManager.updateDot(t,e,s),this.meshCanvas.update()}},{key:"refresh",value:function(){if(this.meshCanvas)this.meshCanvas.update();else{var t=this.canvas.getContext("2d");t.clearRect(0,0,this.canvas.width,this.canvas.height),t.drawImage.apply(t,Object(m.a)(this.values))}}}]),t}(),b=s(20),v=s(21),j=s(22),O=new(function(){function t(){Object(l.a)(this,t)}return Object(d.a)(t,[{key:"init",value:function(t){var e,s=this,i=[{id:"right_sock_source",width:294,height:971,image:{x:-4,y:-2,width:590,height:975}},{id:"right_sock_target",width:1e3,height:1e3,image:{src:"right_sock_source"},data:b},{id:"left_sock_source",width:297,height:974,image:{x:-293,y:-1,width:590,height:975}},{id:"left_sock_target_01",width:287,height:940,image:{x:-10,y:-34,width:297,height:974,src:"left_sock_source"},data:v},{id:"left_sock_target_02",width:1e3,height:1e3,image:{src:"left_sock_target_01"},data:j}];this.meshables=[],this.dummies=i.map((function(i,a){var n=new p;i.image=i.image||{},i.image.src;var c=i.image.src||!1;return i.image.src=c?e:t,c&&(i.mesh=c),n.init(i),i.image.src===e&&s.meshables.push(n),e=n.meshCanvas?n.meshCanvas.output:n.canvas,n}))}},{key:"refresh",value:function(t){this.dummies.filter((function(t){return!t.meshCanvas})).forEach((function(e,s){e.values[0]=t,e.refresh()})),this.meshables.forEach((function(t,e){t.refresh()}))}}]),t}()),w=(s(32),n.a.forwardRef((function(t,e){t.sourceBitmapData;var n=t.dispatch,c=s(33).default,r=s(34).default,u=s(35).default,h=Object(a.useRef)([c,r,u]).current,x=Object(a.useRef)(new Array(h.length).fill(null)).current,y=Object(a.useState)(),l=Object(o.a)(y,2),d=l[0],f=(l[1],Object(a.useState)()),m=Object(o.a)(f,2),g=m[0],p=m[1],b=Object(a.useState)(),v=Object(o.a)(b,2),j=v[0],w=v[1],_=Object(a.useState)(1),C=Object(o.a)(_,2),k=C[0],E=C[1],N=(Object(a.useRef)([]).current,Object(a.useRef)()),M=Object(a.useRef)();return Object(a.useEffect)((function(){if(!d){var t=0;function e(){++t===h.length&&p(2)}h.forEach((function(t,s){var i=new Image;i.src=t,x[s]=i,i.onload=e}))}}),[d]),Object(a.useEffect)((function(){g>=0&&w(O.meshables[g])}),[g]),Object(a.useEffect)((function(){if(j){for(;N.current.childNodes.length;)N.current.removeChild(N.current.childNodes[0]);console.log("DUMMY IS NOW"),console.log(j),j.refresh(),N.current.appendChild(j.meshCanvas.output),N.current.appendChild(j.meshCanvas.wireframe)}}),[j]),j?Object(i.jsxs)("div",{className:"builder",children:[Object(i.jsx)("div",{className:"holder",children:Object(i.jsxs)("div",{className:"guide",style:{width:j.meshCanvas.output.width+200,height:j.meshCanvas.output.height+200},children:[Object(i.jsx)("img",{draggable:!1,src:x[g].src,alt:"guide"}),Object(i.jsx)("div",{className:"canvas-holder",ref:N,style:{opacity:k}}),Object(i.jsx)("div",{ref:M,id:"dots-holder",className:"dots-holder",onMouseDown:function(t){n(t,1/0,g,M.current)},style:{width:j.meshCanvas.output.width,height:j.meshCanvas.output.height},children:j.meshCanvas.gridManager.positions.map((function(t,e){return Object(i.jsxs)("div",{onMouseDown:function(t){n(t,e,g,M.current)},className:"grid-dot",style:{left:t.x,top:t.y},children:[Object(i.jsx)("div",{className:"cross-01"}),Object(i.jsx)("div",{className:"cross-02"})]},"dot_".concat(e))}))})]})}),Object(i.jsxs)("div",{className:"controls",children:[Object(i.jsxs)("div",{className:"button-holder",children:[Object(i.jsx)("div",{children:"THESE ARE THE DUMMIES"}),O.meshables.map((function(t,e){return Object(i.jsx)("div",{className:"button",onClick:function(){p(e),w(O.meshables[e])},children:"Show Canvas ".concat(e)},"button_".concat(e))}))]}),Object(i.jsx)("div",{className:"button-holder",children:Object(i.jsx)("div",{className:"button",onClick:function(){E(k?0:1)},children:Object(i.jsx)("p",{children:"Toggle Visibility"})})}),Object(i.jsx)("div",{className:"button-holder",children:Object(i.jsx)("div",{className:"button",onClick:function(){E(1===k?.55:1)},children:Object(i.jsx)("p",{children:"Toggle Transparency"})})}),Object(i.jsx)("div",{className:"button-holder",children:Object(i.jsx)("div",{className:"button",onClick:function(){console.clear();var t="{ ",e=j.meshCanvas.gridManager;["width","height","columns","rows"].forEach((function(s){t+='"'.concat(s,'": ').concat(e[s]," , ")})),t+='"positions": [ ',e.positions.forEach((function(s,i){t+='{ "x": '.concat(s.x,', "y": ').concat(s.y," }"),e.positions[i+1]&&(t+=", ")})),t+='], "rootPositions": [ ',e.rootPositions.forEach((function(s,i){t+='{ "x": '.concat(s.x,', "y": ').concat(s.y," }"),e.positions[i+1]&&(t+=", ")})),t+="]",t+="}",console.log(t)},children:Object(i.jsx)("p",{children:"Output Points"})})})]})]}):null}))),_=(s(36),n.a.forwardRef((function(t,e){var s=t.thumbs,n=t.layers,c=Object(a.useRef)(),r=Object(a.useState)(0),u=Object(o.a)(r,2),h=u[0],x=u[1];return Object(a.useEffect)((function(){if(h>=0){O.refresh(s[h]);var t=c.current,e=t.getContext("2d");e.clearRect(0,0,t.width,t.height);for(var i=n.length-1;i>-1;i--){var a=n[i];switch(i){case 0:e.drawImage(a,0,0,t.width,t.height);break;case 1:e.globalCompositeOperation="multiply",e.drawImage(a,0,0,t.width,t.height);break;case 3:e.drawImage(a,0,0,t.width,t.height),e.globalCompositeOperation="source-atop",e.drawImage(O.meshables[2].meshCanvas.output,4,4,t.width,t.height),e.drawImage(O.meshables[2].meshCanvas.output,0,0,t.width,t.height);break;case 4:e.drawImage(a,0,0,t.width,t.height),e.globalCompositeOperation="source-atop",e.drawImage(O.meshables[0].meshCanvas.output,4,4,t.width,t.height),e.drawImage(O.meshables[0].meshCanvas.output,0,0,t.width,t.height)}e.globalCompositeOperation="source-over"}}}),[h]),Object(i.jsx)("div",{className:"container",children:Object(i.jsxs)("div",{className:"preview",children:[Object(i.jsx)("div",{className:"samples",children:s.map((function(t,e){return Object(i.jsx)("img",{className:e===h?"selected":"",src:t.src,alt:"thumbnail".concat(e),onClick:function(){x(e)}},"".concat(t.src,"_").concat(e))}))}),Object(i.jsx)("canvas",{ref:c,width:1e3,height:1e3})]})})}))),C=(s(37),"mousedown"),k="mouseup",E="mousemove";function N(){var t=Object(a.useState)(),e=Object(o.a)(t,2),n=e[0],c=e[1],r=Object(a.useRef)(),h=Object(a.useRef)(),y=Object(a.useRef)(),l=Object(a.useState)(),d=Object(o.a)(l,2),f=(d[0],d[1]),m=[s(38).default,s(39).default,s(40).default,s(41).default,s(42).default,s(43).default,s(44).default],g=Object(a.useRef)([]),p=[s(45).default,s(46).default,s(47).default,s(48).default,s(49).default],b=Object(a.useRef)([]),v=Object(a.useState)(),j=Object(o.a)(v,2),N=j[0],M=j[1],S=(Object(a.useRef)(),Object(a.useRef)());function T(t,e,s,i){switch(t.preventDefault(),t.stopPropagation(),t.type){case C:n.addEventListener(E,T,!1),n.addEventListener(k,T,!1),S.current=s,r.current=e,h.current=i.getBoundingClientRect(),y.current={x:t.pageX,y:t.pageY};break;case k:n.removeEventListener(E,T,!1),n.removeEventListener(k,T,!1),S.current=null,r.current=null,h.current=null,y.current=null;break;case E:var a=O.meshables[S.current];r.current===1/0?(a.meshCanvas.gridManager.positions.forEach((function(e,s){a.updateDot(s,e.x-(y.current.x-t.pageX),e.y-(y.current.y-t.pageY))})),y.current={x:t.pageX,y:t.pageY}):a.updateDot(r.current,t.pageX-h.current.x,t.pageY-h.current.y-document.documentElement.scrollTop),f(Math.random())}}return Object(a.useEffect)((function(){n||c(document.getElementsByTagName("body")[0])}),[n]),Object(a.useEffect)((function(){if(!N){var t=0;function e(){if(++t===m.length+p.length){var e=g.current[0];M(e),O.init(e)}}m.forEach((function(t,s){var i=new Image;i.src=t,i.onload=function(){g.current[s]=i,e()}})),p.forEach((function(t,s){var i=new Image;i.src=t,i.onload=function(){b.current[s]=i,e()}}))}}),[N]),N?Object(i.jsx)(u.b,{history:x,children:Object(i.jsxs)(u.c,{children:[Object(i.jsx)(u.a,{path:"",render:function(t){return Object(i.jsx)(_,{thumbs:g.current,layers:b.current})}}),Object(i.jsx)(u.a,{path:"/admin",render:function(t){return Object(i.jsx)(w,{sourceBitmapData:N,dispatch:T})}})]})}):Object(i.jsx)("div",{children:"LOADING!"})}var M=function(t){t&&t instanceof Function&&s.e(3).then(s.bind(null,61)).then((function(e){var s=e.getCLS,i=e.getFID,a=e.getFCP,n=e.getLCP,c=e.getTTFB;s(t),i(t),a(t),n(t),c(t)}))};r.a.render(Object(i.jsx)(N,{}),document.getElementById("root")),M()}]),[[58,1,2]]]);
//# sourceMappingURL=main.f5fbe128.chunk.js.map